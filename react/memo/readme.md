# useMemo & useCallback

- react 性能优化
  - useMemo：用来“记住”一个计算结果，依赖不变就不重新算，省性能。
  - useCallback：用来“记住”一个函数，依赖不变就不生成新函数，避免子组件白刷新。
  - memo：包在子组件外面，告诉 React：“如果 props 没变，就别重新渲染我”。
  - 为什么需要它们？因为 React 默认只要父组件更新，子组件也会跟着更新，哪怕没变化。
    - 比如：父组件里有个 count 变了，但子组件只用了一个不变的列表——它其实不用重画，但 React 还是会重画。
    - 注意：不是所有地方都要用！只有组件变卡、重复渲染多时才需要优化。

  - includes 方法 “” 也为 true
  - count 改变也会让 filterList 重新执行
  - 应该避免

## useMemo

- useMemo 缓存计算结果
  - 组件中有计算属性的需求 vue 给了 api,react 直接做
    第一个参数函数封转计算的过程
  - 有些计算是比较昂贵的
  - 依赖性改变时，才会重新计算
    第二个参数，依赖数组

## useCallback

- 子组件 它依赖的 props 没有发生改变 子组件就不需要重新渲染
  - react 数据流管理思想 **父组件负责持有和管理数据，子组件负责展示数据**
  - memo
    - 高阶组件
    - 优化函数组件的性能，避免不必要的重新渲染（通过 props）
    - 传递的函数每次都会重新生成，需要缓冲
  - useCallback
    - 缓存传递的子组件会调用的回调函数
    - 给依赖项
