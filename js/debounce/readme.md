# 闭包的应用场景

## 性能优化主题

- 防抖
  帕金森
  - 执行太密集
  - 任务比较复杂

- 场景
  - baidu ajax suggest 搜索建议
  - code suggest
    太快了，请求开销就大
    太慢了，用户体验差

## 防抖

- keyup 事件太频繁，没必要执行那么多次
- 管你keyup触发多少次，我只执行最后一次
- 在一定时间内执行一次 节流
  讲keyup 事件， ajax 分开 ？
- 借助定时器和闭包
  - 推迟执行timeout
  - 定时器ID 放到闭包中，方便清除
  - 每次触发都清除之前的定时器，重新开始倒计时
  - 执行最后一次

## 防抖和节流的区别

在一定时间内，只执行最后一次 防抖（setTimeout）
每隔一定时间执行一次 节流 (setInterval)

函数节流就像是fps游戏的射速，就算一直按着鼠标射击，也只会在规定射速内射出子弹。
总结：

- 函数的防抖和节流都是防某一时间频繁触发，但是这两兄弟原理不一样
- 防抖是某段时间内只执行一次，而函数节流是间隔时间执行

- debounce
  - 搜索建议，用户不断输入值时， 用防抖来节约请求资源。
- throttle
  - 滚动加载，用户不断滚动页面时， 用节流来节约请求资源。
